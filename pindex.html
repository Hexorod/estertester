<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>qz-star</title>
<style>
  body {
    margin: 0;
    background-color: #202124;
    height: 100vh;
    overflow: hidden;
    color: #fff;
    font-family: Arial, sans-serif;
  }

  #content {
    width: 100%;
    height: calc(100% - 40px);
  }

  #debug {
    height: 40px;
    background: #111;
    color: #0f0;
    font-size: 14px;
    display: flex;
    align-items: center;
    padding: 0 10px;
    box-sizing: border-box;
    border-top: 1px solid #333;
  }
</style>
<script>
  // Prevent direct access — only allow if inside an iframe
  if (window.top === window.self) {
    document.documentElement.innerHTML = "";
    throw new Error("Direct access blocked");
  }
</script>
</head>
<body>
<div id="content"></div>
<div id="debug">Detecting...</div>

<script>
  const url = 'https://www.tiktok.com';
  const container = document.getElementById('content');
  const debug = document.getElementById('debug');

  // --- Automatically detect base path ---
  const segments = location.pathname.split('/').filter(Boolean);
  const base = segments.length ? `/${segments[0]}/` : '/';
  const embedUrl = location.origin + base + 's/embed.html#' + url; // ✅ no encodeURIComponent

  // --- Display the detected URL for testing ---
  debug.textContent = 'Embed URL → ' + embedUrl;

  // --- Create iframe ---
  const iframe = document.createElement('iframe');
  iframe.src = embedUrl;
  iframe.style.width = '100%';
  iframe.style.height = '100%';
  iframe.style.border = 'none';
  container.appendChild(iframe);
</script>
</body>
</html>
